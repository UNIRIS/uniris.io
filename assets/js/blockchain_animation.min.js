!function(){function t(t){var a=t.getBoundingClientRect(),o=a.top,n=a.bottom;return o>=0&&n<=window.innerHeight}function a(){function a(t,a,o){var n=o.source,e=o.target,i=r(n,e,.5);return[t(n),a(i),t(e)]}function r(t,a,o){return d3.geo.interpolate(t,a)(o)}var e=d3.geo.orthographic().translate([150,150]).clipAngle(90).scale(300);e.rotate([0,-30,0]);var i=d3.geo.orthographic().translate([150,150]).clipAngle(90).scale(300),c=d3.geo.path().projection(e).pointRadius(3),s=d3.svg.line().x(function(t){return t[0]}).y(function(t){return t[1]}).interpolate("cardinal").tension(0),d=n.append("g").attr("opacity",0).attr("transform","translate(0,200)");queue().defer(d3.json,"/assets/json/world-110m.json").defer(d3.json,"/assets/json/places.json").await(function(n,r,l){d.append("path").datum(topojson.object(r,r.objects.land)).attr("class","land noclicks").attr("d",c).attr("fill","#000").attr("fill-opacity","0.2").attr("stroke","#fff"),d.transition().duration(1e3).delay(1500).attr("opacity",1).each("end",function(){function n(t){function c(t,o,c){arc={source:t.coordinates,target:o.coordinates};var f=d.append("path").attr("class","flyer").attr("stroke","#00a4db").attr("stroke-width","3").attr("fill","none").attr("opacity","0.5").attr("d",function(t){return s(a(e,i,arc))}),u=f.node().getTotalLength();f.attr("stroke-dasharray",u+" "+u).attr("stroke-dashoffset",u).transition().duration(1e3).delay(1e3*c).attr("stroke-dashoffset",0).each("end",function(){++h==l.length&&r&&n(!0)})}var h=0;t&&d3.selectAll("#blockchain-anim .flyer").each(function(){this.remove()});for(var f=0;f<Math.floor(l.length/3);f++){for(var u=Math.floor(Math.random()*l.length);u==f&&o(l[f].coordinates[1],l[f].coordinates[0],l[u].coordinates[1],l[u].coordinates[0],"K")<1e3;)u=Math.floor(Math.random()*l.length);for(var g=Math.floor(Math.random()*l.length);g==f&&g==u&&o(l[f].coordinates[1],l[f].coordinates[0],l[g].coordinates[1],l[g].coordinates[0],"K")<1e3;)g=Math.floor(Math.random()*l.length);for(var p=Math.floor(Math.random()*l.length);p==f&&p==g&&p==u&&o(l[f].coordinates[1],l[f].coordinates[0],l[p].coordinates[1],l[p].coordinates[0],"K")<1e3;)p=Math.floor(Math.random()*l.length);c(l[f],l[u],f),c(l[f],l[g],f),c(l[f],l[p],f)}}var r=!1;document.addEventListener("scroll",function(){if(t(document.querySelector("#blockchain-anim"))){if(r)return;r=!0,n(!0)}else r=!1}),n()})})}function o(t,a,o,n,r){if(t==o&&a==n)return 0;var e=Math.PI*t/180,i=Math.PI*o/180,c=a-n,s=Math.PI*c/180,d=Math.sin(e)*Math.sin(i)+Math.cos(e)*Math.cos(i)*Math.cos(s);return d>1&&(d=1),d=Math.acos(d),d=180*d/Math.PI,d=60*d*1.1515,"K"==r&&(d*=1.609344),"N"==r&&(d*=.8684),d}var n=d3.select("#blockchain-anim").append("svg").style("display","block").style("margin","auto").attr("viewBox","-1400 0 3000 650"),r=!1;document.addEventListener("scroll",function(){if(t(document.querySelector("#blockchain-anim"))){if(r)return;a(),r=!0}})}();